<script type="text/javascript">
    // Building all filters defined in config file
    var filterContainer = "task_duration_filter";
    var filtersConfig = generateFiltersModelFromConfig(filterContainer);
    filtersConfig.unshift({
        id: filterContainer + "_max_cycle_time",
        filterType: 'NumberRangeFilter',
        columnIndex: DURATION_INDEX_DURATION_CYCLE_TIME
    });
    generateFiltersDom(filterContainer, filtersConfig);

    // Defining columns that should be displayed on Bar Chart depending on Events in Config (duration Nb = events Nb -1)
    var durationsColumns = [2];
    for (var i = 0; i < RAW_DATA_COL.EVENTS.length - 1; i++) {
        durationsColumns.push(DURATION_INDEX_DURATION_FIRST + i);
    }

    var taskDurationDashboardConfig = {
        titleSuffix: {
            id: 'task_duration_title_suffix'
        },
        dashboard: 'task_duration_dashboard_div',
        durationColumnChart: {
            id: 'task_duration_column_chart_div',
            columns: durationsColumns
        },
        durationScatterChart: {
            id: 'task_duration_scatter_chart_div',
            columns: [DURATION_INDEX_STATIC_LAST,
                DURATION_INDEX_DURATION_LAST,
                DURATION_INDEX_STATITICS_AVERAGE,
                DURATION_INDEX_STATITICS_50PCT,
                DURATION_INDEX_STATITICS_90PCT]
        },
        durationStats: 'task_duration_stats',
        taskFilters: filtersConfig,
        tasksList: 'task_duration_tasks_list'
    };

    registerDashboard("#tab_duration_view", new DurationDashboard(taskDurationDashboardConfig));
</script>
<div class="card">
    <div class="row">
        <h2 class="col-md-12 card-title">Tasks Duration<span id="task_duration_title_suffix"></span>
            <a class="not-to-print" href="#"><span class="glyphicon glyphicon-th-list pull-right" data-toggle="modal" data-target="#task_duration_tasks_list_modal"></span></a>
        </h2>
    </div>
    <div class="row">
        <div id="task_duration_dashboard_div" class="col-md-12 card-block">
            <div id="task_duration_filter" class="row card-block"></div>
            <div class="row card-block">
                <div id="task_duration_stats"></div>
            </div>
            <div class="row card-block">
                <div id="task_duration_column_chart_div"></div>
                <div id="task_duration_scatter_chart_div"></div>
            </div>
        </div>
    </div>
</div>

<div id="task_duration_tasks_list_modal" class="modal ticket-list fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Tasks list</h4>
            </div>
            <div class="modal-body">
                <div id="task_duration_tasks_list" class="col-md-12"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>